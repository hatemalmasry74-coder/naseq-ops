<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>منصة نَسَق – الإعدادات</title>

  <link rel="stylesheet" href="nasaq-theme.css">
  <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700;800;900&display=swap" rel="stylesheet">

  <style>
    body{font-family:"Almarai",sans-serif}
    .cardx{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:18px;box-shadow:0 12px 26px rgba(0,0,0,.08);padding:16px}
    .muted{color:#6b7280}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:900px){.row{grid-template-columns:1fr}}
    input,select{width:100%;padding:12px 12px;border-radius:14px;border:1px solid rgba(0,0,0,.14);font-family:inherit}
    .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{border:none;border-radius:14px;padding:10px 14px;font-weight:900;cursor:pointer}
    .btn-primary{background:var(--nasaq-primary,#b91c1c);color:#fff}
    .btn-outline{background:#fff;border:1px solid rgba(0,0,0,.14);color:#111827}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid rgba(0,0,0,.12);font-weight:900;font-size:12px;background:#fff}

    /* ===== Unified Top Nav ===== */
    .nasaq-topnav{
      display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap;
      padding:14px; margin:14px auto;
      border-radius:18px; background: rgba(255,255,255,.92);
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 22px rgba(0,0,0,.08);
    }
    .nasaq-topnav .tab{
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 14px; border-radius:999px;
      border:1px solid rgba(0,0,0,.12);
      background:#fff; color:#111827; font-weight:900;
      text-decoration:none; transition:.15s ease;
    }
    .nasaq-topnav .tab:hover{transform:translateY(-1px)}
    .nasaq-topnav .tab-active{
      background: var(--nasaq-primary, #b91c1c);
      color:#fff;
      border-color: var(--nasaq-primary, #b91c1c);
    }
  </style>
</head>

<body>
<main class="container">

  <!-- NAV الموحد -->
  <div class="nasaq-topnav" id="topnav">
    <a href="index.html" class="tab" data-page="index.html">الرئيسية</a>
    <a href="visits.html" class="tab" data-page="visits.html">الزيارات</a>
    <a href="tasks.html" class="tab" data-page="tasks.html">المهام</a>
    <a href="cleaning.html" class="tab" data-page="cleaning.html">النظافة</a>
    <a href="sop.html" class="tab" data-page="sop.html">SOP</a>
    <a href="settings.html" class="tab" data-page="settings.html">الإعدادات</a>
    <a href="plans.html" class="tab" data-page="plans.html">الخطط</a>
  </div>

  <div class="cardx">
    <h1 style="margin:0;font-weight:900">الإعدادات</h1>
    <div class="muted">إعدادات بسيطة للـ MVP (محليًا).</div>
  </div>

  <div class="cardx" style="margin-top:14px">
    <h2 style="margin:0 0 10px;font-weight:900">تفضيلات عامة</h2>

    <div class="row">
      <div>
        <label class="muted">اسم المستخدم</label>
        <input id="user" placeholder="مثال: حاتم عطية">
      </div>
      <div>
        <label class="muted">الدور</label>
        <select id="role">
          <option value="مدير تشغيل">مدير تشغيل</option>
          <option value="مشرف تشغيل">مشرف تشغيل</option>
          <option value="CEO">CEO</option>
        </select>
      </div>
    </div>

    <div class="row" style="margin-top:10px">
      <div>
        <label class="muted">البراند الافتراضي</label>
        <select id="brand">
          <option value="سدف">سدف</option>
          <option value="طوبى">طوبى</option>
          <option value="دبل بي">دبل بي</option>
          <option value="Flavor Town">Flavor Town</option>
        </select>
      </div>
      <div>
        <label class="muted">نمط العرض</label>
        <select id="mode">
          <option value="light">لايت</option>
          <option value="dark">دارك (شكلي فقط)</option>
        </select>
      </div>
    </div>

    <div class="btnrow">
      <button class="btn btn-primary" onclick="saveSettings()">حفظ</button>
      <button class="btn btn-outline" onclick="resetSettings()">إعادة ضبط</button>
      <a class="btn btn-outline" href="index.html" style="text-decoration:none">فتح الرئيسية</a>
    </div>

    <div class="pill" style="margin-top:12px" id="statusPill">جاهز</div>
  </div>

</main>

<script>
  (function activateTab(){
    const file = (location.pathname.split("/").pop() || "index.html").toLowerCase();
    document.querySelectorAll("#topnav .tab").forEach(a=>{
      const p = (a.getAttribute("data-page")||"").toLowerCase();
      if(p === file) a.classList.add("tab-active");
    });
  })();

  const LS_KEY="nasaq_settings_v1";

  function load(){
    try{return JSON.parse(localStorage.getItem(LS_KEY)||"{}")}catch(e){return {}}
  }
  function save(obj){ localStorage.setItem(LS_KEY, JSON.stringify(obj)); }

  function applyMode(mode){
    // MVP: مجرد تلميح (لا يغير nasaq-theme.css)
    document.documentElement.dataset.mode = mode;
  }

  function fill(){
    const s=load();
    document.getElementById("user").value = s.user || "";
    document.getElementById("role").value = s.role || "مدير تشغيل";
    document.getElementById("brand").value = s.brand || "سدف";
    document.getElementById("mode").value = s.mode || "light";
    applyMode(document.getElementById("mode").value);
  }

  function saveSettings(){
    const s={
      user: (document.getElementById("user").value||"").trim(),
      role: document.getElementById("role").value,
      brand: document.getElementById("brand").value,
      mode: document.getElementById("mode").value
    };
    save(s);
    applyMode(s.mode);
    document.getElementById("statusPill").textContent="تم الحفظ ✅";
    setTimeout(()=> document.getElementById("statusPill").textContent="جاهز", 1200);
  }

  function resetSettings(){
    if(!confirm("إعادة ضبط الإعدادات؟")) return;
    localStorage.removeItem(LS_KEY);
    fill();
    document.getElementById("statusPill").textContent="تمت الإعادة ✅";
    setTimeout(()=> document.getElementById("statusPill").textContent="جاهز", 1200);
  }

  document.getElementById("mode").addEventListener("change", e=>applyMode(e.target.value));
  fill();
</script>

</body>
</html>
